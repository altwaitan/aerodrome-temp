{% extends "base.html" %}
{% block content %}
<style>
    #thank-you-message {
        display: none;
    }

    .team-image {
    width: 350px !important; /* Adjust this value as needed */
    height: 450px !important; /* Adjust this value as needed */
    object-fit: cover !important; /* Ensures the images maintain their aspect ratio while filling the dimensions */
    }
</style>
<div class="site-content-contain">
<div id="content" class="site-content">                    
    <div id="primary" class="content-area">
        <main id="main" class="site-main" role="main">
            <article class="page">                                
                <div class="entry-content">  
                    <div class="container-fluid hero-section m-b-35" style="background-image: url(&#39;static/assets/images/icons/IMG_7996.jpg&#39;); background-position: center top;">  
                    </div>
                    <div class="container m-t-90">
                        <div class="row">                                    
                            <div class="col-sm-12"> 
                                <div class="heading-block m-b-10">
                                    <h1 class="block-size-4">
                                        Register
                                    </h1>
                                </div>
                                <div class="text-block m-b-45">
                                    <p class="medium">
                                        Register below with your name, email, lab or professor name, and research project in order to get calendar and Aerodrome access. 
                                    </p>
                                </div>
                                <div class="row m-t-40">                                    
                                    <div class="col-sm-12">
                                         <div role="form" class="kraftcf">                                                    
                                            <form id="contact-form" action="https://formspree.io/f/mzbqavno" method="post" class="kraftcf-form" novalidate="novalidate">                                                       
                                                <div class="contact-form-main">
                                                    <div class="contact-form-fields-wrap clearfix">
                                                        <div class="contact-form-fields">
                                                            <span class="kraftcf-form-control-wrap name">
                                                                <input type="text" name="name" value="" size="40" class="kraftcf-form-control kraftcf-text kraftcf-validates-as-required" aria-required="true" aria-invalid="false" placeholder="Name*">
                                                                <span role="alert" class="kraftcf-not-valid-tip">The field is required.</span>
                                                            </span>
                                                        </div>
                                                        <div class="contact-form-fields">
                                                            <span class="kraftcf-form-control-wrap email">
                                                                <input type="email" name="email" value="" size="40" class="kraftcf-form-control kraftcf-text kraftcf-email kraftcf-validates-as-required kraftcf-validates-as-email" aria-required="true" aria-invalid="false" placeholder="Email*">
                                                                <span role="alert" class="kraftcf-not-valid-tip">The field is required.</span>
                                                                <span role="alert" class="kraftcf-not-valid-tip">The e-mail address entered is invalid.</span>
                                                            </span>
                                                        </div>
                                                        <div class="contact-form-fields">
                                                            <span class="kraftcf-form-control-wrap subject">
                                                                <input type="text" name="subject" value="" size="40" class="kraftcf-form-control kraftcf-text kraftcf-validates-as-required" aria-required="true" aria-invalid="false" placeholder="Lab/Professor name*">                                                                       
                                                                <span role="alert" class="kraftcf-not-valid-tip">The field is required.</span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <p>
                                                        <span class="kraftcf-form-control-wrap message">
                                                            <textarea name="message" cols="40" rows="10" class="kraftcf-form-control kraftcf-textarea kraftcf-validates-as-required" aria-required="true" aria-invalid="false" placeholder="Give the project name and a brief description of the project*"></textarea>
                                                            <span role="alert" class="kraftcf-not-valid-tip">The field is required.</span>
                                                        </span>
                                                    </p>
                                                    <p>
                                                        <input type="submit" value="SEND MESSAGE" class="kraftcf-form-control kraftcf-submit">
                                                    </p>
                                                </div>
                                                <div class="kraftcf-response-output kraftcf-display-none kraftcf-validation-errors" role="alert">One or more fields have an error. Please check and try again.</div>
                                                <div class="kraftcf-response-output kraftcf-display-none kraftcf-mail-sent-ok" role="alert">Thank you for your message. It has been sent.</div>
                                            </form>
                                            <div id="thank-you-message" class="kraftcf-response-output kraftcf-display-none kraftcf-mail-sent-ok" >
                                                Thank you for your message. Your request has been submitted. </div>
                                        </div>
                                    </div>
                                </div>     

                                <div class="row m-t-65 m-b-15">                                    
                                    <div class="col-sm-12">
                                        <div class="heading-block text-left">
                                            <h1 class="block-size-4">
                                                Schedule 
                                            </h1>
                                        </div>
                                    </div>
                                </div>    

                                <div class="row">                                    
                                    <div class="col-md-6 m-b-40">
                                        <div class="text-block m-b-45">
                                            <p class="medium">
                                                If your registration has already been accepted, you can schedule time slots using the email you provided in the registration form by clicking on the calendar. 
                                            </p>
                                            <p class="medium">
                                                Please read and follow the Code of Conduct on our <a href="conduct.html" style="color: #182B49;">Rules page</a> when utilizing the Aerodrome! Improper use of the Aerodrome facility may result in registration suspension.
                                            </p>
                                            <div class="btn-container solid">
                                                <a href="/conduct" title="Code of Conduct">CODE OF CONDUCT</a>
                                            </div>	
                                            <p class="medium">
                                                Please also follow the instructions guide listed on our <a href="instructions.html" style="color: #182B49;">Instructions page</a>.
                                            </p>
                                            <div class="btn-container solid">
                                                <a href="/instructions" title="Instructions">INSTRUCTIONS</a>
                                            </div>
                                        </div>
                                    </div>          
                                    <div class="col-md-6 m-b-40">
                                        <div class="desc-list-container has-border">
                                            <iframe src="https://calendar.google.com/calendar/embed?height=600&wkst=2&bgcolor=%23ffffff&ctz=America%2FLos_Angeles&title=Aerodrome%20Schedule&showNav=1&showPrint=0&showTabs=0&showCalendars=0&src=YWVyb2Ryb21lQHVjc2QuZWR1&color=%23039BE5" style="border-width:0" width="800" height="600" frameborder="0" scrolling="no"></iframe>
                                        </div>
                                    </div>       
                                </div>    
                            </div>                                                                                               
                        </div>                                
                    </div> <!-- Container -->
                </div>
            </article>        
        </main><!-- #main -->
    </div><!-- #primary -->                                
</div><!-- #content -->
<script>
    document.getElementById('contact-form').addEventListener('submit', function(event) {
        event.preventDefault();
        const form = event.target;

        fetch(form.action, {
            method: 'POST',
            body: new FormData(form),
            headers: {
                'Accept': 'application/json'
            }
        }).then(response => {
            if (response.ok) {
                form.style.display = 'none';
                document.getElementById('thank-you-message').style.display = 'block';
            } else {
                alert('Error: Please try again later.');
            }
        }).catch(() => {
            alert('Error: Please try again later.');
        });
    });
</script>
{% endblock content %}